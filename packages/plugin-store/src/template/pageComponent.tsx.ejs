import * as React from 'react';
<%- pageComponentImport %>

<% if(hasPageStore) { %>
  import store from './store';
<% } %>

<% if(hasComponentStore) { %>
  import componentStore from './componentStore';
<% } %>

const PageComponentName = <%= pageComponentExport %>;

<% if(hasPageStore || hasComponentStore) { %>
  let PageProvider = null;
  let ComponentProvider = null;

  <% if(hasPageStore) { %>
    PageProvider = store.Provider;
  <% } %>

  <% if(hasComponentStore) { %>
    ComponentProvider = componentStore.Provider;
  <% } %>

  const StoreWrapperedPage = () => getComponent(PageProvider, ComponentProvider);
  StoreWrapperedPage.pageConfig = PageComponentName.pageConfig || {};
  export default StoreWrapperedPage;
<% } else { %>
  export default PageComponentName;
<% } %>

function getComponent(PageProvider, ComponentProvider) {
  if (PageProvider && ComponentProvider) {
    return (
      <PageProvider>
        <ComponentProvider>
          <PageComponentName />
        </ComponentProvider>
      </PageProvider>
    )
  } else if (PageProvider) {
    return (
      <PageProvider>
        <PageComponentName />
      </PageProvider>
    )
  } else if (ComponentProvider) (
    <ComponentProvider>
      <PageComponentName />
    </ComponentProvider>
  )
}
